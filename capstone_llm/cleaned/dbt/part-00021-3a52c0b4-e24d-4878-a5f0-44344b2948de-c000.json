{"title":"dbt relationship test compilation error: test definition dictionary must have exactly one key","question_body":"<p>I'm a new user of dbt, trying to write a relationship test:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>- name: PROTOCOL_ID\n  tests:\n    - relationships:\n    to: ref('Animal_Protocols')\n    field: id\n</code></pre>\n<p>I am getting this error:</p>\n<pre><code>Compilation Error\nInvalid test config given in models/Animal_Protocols/schema.yml:\ntest definition dictionary must have exactly one key, got [('relationships', None), ('to', &quot;ref('Animal_Protocols')&quot;), ('field', 'id')] instead (3 keys)\n@: UnparsedNodeUpdate(original_file_path='model...ne)\n</code></pre>\n<p>&quot;unique&quot; and &quot;not-null&quot; tests in the same file are working fine, but I have a similar error with &quot;accepted_values&quot;.</p>\n<p>I am using dbt cli version 0.21.0 with Snowflake on MacOS Big Sur 11.6.</p>\n","answer_body":"<p>You are very close! I'm 96% sure that this is an indentation issue -- the #1 pain point of working with YAML. The solution is that both <code>to</code> and <code>field</code> need to be indented below the <code>relationships</code> key as opposed to at the same level.</p>\n<p>See the <a href=\"https://docs.getdbt.com/docs/building-a-dbt-project/tests/#generic-tests\" rel=\"noreferrer\">Tests dbt docs page</a> for an example</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>  - name: PROTOCOL_ID\n    tests:\n      - relationships:\n          to: ref('Animal_Protocols')\n          field: id\n</code></pre>\n"}
